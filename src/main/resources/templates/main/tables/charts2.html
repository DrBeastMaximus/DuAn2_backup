<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">

<head>
    <meta charset="utf-8" />
    <link rel="apple-touch-icon" sizes="76x76" href="../assets/img/apple-icon.png" />
    <link rel="icon" type="image/png" href="../assets/img/favicon.png" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>DW Fashion</title>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
    <meta name="viewport" content="width=device-width" />
    <!-- Bootstrap core CSS     -->
    <link th:href="@{/assets/css/bootstrap.min.css}" rel="stylesheet" />
    <!--  Material Dashboard CSS    -->
    <link th:href="@{/assets/css/material-dashboard.css?v=1.2.1}" rel="stylesheet" />
    <!--  CSS for Demo Purpose, don't include it in your project     -->
    <link th:href="@{/assets/css/demo.css}" rel="stylesheet" />
    <!--     Fonts and icons     -->
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Material+Icons" />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Chartlist -->
    <link rel="stylesheet" th:href="@{//cdn.jsdelivr.net/chartist.js/latest/chartist.min.css}">

    <script th:src="@{/assets/js/angular.min.js}"></script>
    <script th:src="@{/assets/js/angular-route.js}"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script src="https://cdn.anychart.com/releases/8.7.1/js/anychart-base.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>


</head>

<body ng-app="myapp" ng-controller="myctrl">
<input hidden id="year" name="year" ng-model="year" th:value="${year}">
<input  hidden id="year_top" name="year_top" ng-model="year_top" th:value="${year_top}">
<input hidden ng-model="username" th:value="${username}">
<input hidden ng-model="role" th:value="${role}">
<style>
    .ct-label{
        font-size:12px
    }
    .ct-chart-donut .ct-label {
        font-size:20px
    }
</style>

<div class="wrapper">
    <div class="sidebar" data-active-color="rose" data-background-color="black" data-image="../assets/img/sidebar-1.jpg">
        <!--
    Tip 1: You can change the color of active element of the sidebar using: data-active-color="purple | blue | green | orange | red | rose"
    Tip 2: you can also add an image using data-image tag
    Tip 3: you can change the color of the sidebar with data-background-color="white | black"
-->
        <div class="logo">
            <a href="" class="simple-text logo-mini">
                DW
            </a>
            <a href="" class="simple-text logo-normal">
                DW Fashion
            </a>
        </div>
        <div class="sidebar-wrapper">
            <div class="user">
                <div class="photo">
                    <img th:src="@{/assets/img/faces/avatar.jpg}" />
                </div>
                <div class="info">
                    <a data-toggle="collapse" href="#collapseExample" class="collapsed">
                            <span>
                                 {{username}}

                                <b class="caret"></b>
                            </span>
                    </a>
                    <div class="clearfix"></div>
                    <div class="collapse" id="collapseExample">
                        <ul class="nav">
                            <li>
                                <a th:href="@{../login/logut}">
                                    <span class="sidebar-mini">  </span>
                                    <span class="sidebar-normal"> Logout </span>
                                </a>
                            </li>

                        </ul>
                    </div>
                </div>
            </div>
            <ul class="nav">
                <li ng-if="role == 1">
                    <a data-toggle="collapse" href="#mapsExamples">
                        <i class="material-icons">waterfall_chart</i>
                        <p>     Thống Kê
                            <b class="caret"></b>
                        </p>
                    </a>
                    <div class="collapse in" id="mapsExamples">
                        <ul class="nav">
                            <li class="active">
                                <a th:href="@{../statistical/home}">
                                    <span class="sidebar-mini"> T </span>
                                    <span class="sidebar-normal"> Tổng  </span>
                                </a>
                            </li>
                            <li>
                                <a th:href="@{../statistical/detail}">
                                    <span class="sidebar-mini"> T </span>
                                    <span class="sidebar-normal"> Sản Phảm Và Nhà Cung Cấp  </span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li >
                    <a data-toggle="collapse" href="#tablesExamples" aria-expanded="true">
                        <i class="material-icons">manage_accounts</i>
                        <p> Quản Lý
                            <b class="caret"></b>
                        </p>
                    </a>
                    <div class="collapse" id="tablesExamples">
                        <ul class="nav">
                            <li >
                                <a th:href="@{../invoice/home/cho-xac-nhan}">
                                    <span class="sidebar-mini"> ĐH </span>
                                    <span class="sidebar-normal"> Đơn Hàng </span>
                                </a>
                            </li>
                            <li ng-if="role == 1">
                                <a th:href="@{../taikhoan/home}">
                                    <span class="sidebar-mini"> TK </span>
                                    <span class="sidebar-normal"> Tài khoản </span>
                                </a>
                            </li>
                            <li ng-if="role == 1">
                                <a th:href="@{../user/home}">
                                    <span class="sidebar-mini"> US </span>
                                    <span class="sidebar-normal"> User </span>
                                </a>
                            </li>
                            <li>
                                <a th:href="@{../productproperty/home}">
                                    <span class="sidebar-mini"> TT </span>
                                    <span class="sidebar-normal"> Thuộc Tính Sản Phẩm </span>
                                </a>
                            </li>
                            <li>
                                <a th:href="@{../supplier/home}">
                                    <span class="sidebar-mini"> NC </span>
                                    <span class="sidebar-normal"> Nhà Cung Cấp </span>
                                </a>
                            </li>

                            <li ng-if="role == 1">
                                <a th:href="@{../voucher/home}">
                                    <span class="sidebar-mini"> V </span>
                                    <span class="sidebar-normal"> Voucher </span>
                                </a>
                            </li>
                            <li >
                                <a th:href="@{../product/home}">
                                    <span class="sidebar-mini"> SP </span>
                                    <span class="sidebar-normal"> Sản Phẩm </span>
                                </a>
                            </li>
                            <li >
                                <a th:href="@{../newsletter/home}">
                                    <span class="sidebar-mini"> E </span>
                                    <span class="sidebar-normal"> Email </span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </li>

                <li>
                    <a data-toggle="collapse" href="#pagesExamples">
                        <i class="material-icons">delete</i>
                        <p> Thùng Rác
                            <b class="caret"></b>
                        </p>
                    </a>
                    <div class="collapse" id="pagesExamples">
                        <ul class="nav">
                            <li ng-if="role == 1">
                                <a th:href="@{../trashcon/trashconadmin}">
                                    <span class="sidebar-mini"> TK </span>
                                    <span class="sidebar-normal"> Tài Khoản </span>
                                </a>
                            </li>
                            <li ng-if="role == 1">
                                <a th:href="@{../trashcon/trashconuser}">
                                    <span class="sidebar-mini"> US</span>
                                    <span class="sidebar-normal"> User </span>
                                </a>
                            </li>
                            <li>
                                <a th:href="@{../trashcon/trashconproduct}">
                                    <span class="sidebar-mini"> SP</span>
                                    <span class="sidebar-normal"> Sản Phẩm </span>
                                </a>
                            </li>
                            <li>
                                <a th:href="@{../trashcon/trashconsupplier}">
                                    <span class="sidebar-mini"> NC</span>
                                    <span class="sidebar-normal"> Nhà Cung Cấp </span>
                                </a>
                            </li>
                            <li>
                                <a th:href="@{../trashcon/trashconvoucher}">
                                    <span class="sidebar-mini"> V</span>
                                    <span class="sidebar-normal"> Voucher </span>
                                </a>
                            </li>

                        </ul>
                    </div>
                </li>
            </ul>
        </div>
    </div>
    <div class="main-panel">
        <nav class="navbar navbar-transparent navbar-absolute">
            <div class="container-fluid">
                <div class="navbar-minimize">
                    <button id="minimizeSidebar" class="btn btn-round btn-white btn-fill btn-just-icon">
                        <i class="material-icons visible-on-sidebar-regular">more_vert</i>
                        <i class="material-icons visible-on-sidebar-mini">view_list</i>
                    </button>
                </div>
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="#"> Thống kê </a>
                </div>

            </div>
        </nav>

        <div class="content">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-lg-3 col-md-6 col-sm-6">
                        <div class="card card-stats">
                            <div class="card-header" data-background-color="orange">
                                <i class="material-icons">verified</i>
                            </div>
                            <div class="card-content">
                                <p class="category">Tổng đơn hàng</p>
                                <h3 class="card-title">{{totalbill1[0]}}</h3>
                            </div>
                            <div class="card-footer">

                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6 col-sm-6">
                        <div class="card card-stats">
                            <div class="card-header" data-background-color="green">
                                <i class="material-icons">store</i>
                            </div>
                            <div class="card-content">
                                <p class="category">Tổng doanh thu</p>
                                <h3 class="card-title">{{totalbill1[1]}}</h3>
                            </div>
                            <div class="card-footer">

                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6 col-sm-6">
                        <div class="card card-stats">
                            <div class="card-header" data-background-color="rose">
                                <i class="material-icons">equalizer</i>
                            </div>
                            <div class="card-content">
                                <p class="category">Tổng khách hàng</p>
                                <h3 class="card-title">{{count_User[0]}}</h3>
                            </div>
                            <div class="card-footer">

                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6 col-sm-6">
                        <div class="card card-stats">
                            <div class="card-header" data-background-color="blue">
                                <i class="material-icons">account_circle</i>
                            </div>
                            <div class="card-content">
                                <p class="category">Số khách hàng mới</p>
                                <h3 class="card-title">+ {{User_newYear[0]}}</h3>
                            </div>
                            <div class="card-footer">

                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4">
                        <div class="card card-chart">
                            <div class="card-header" data-background-color="rose">
                                <div id="chart2" class="ct-chart"></div>
                            </div>
                            <div class="card-content">
                                <h4 class="card-title">Tổng đơn hàng</h4>
                                <p class="category">Năm {{year}}
                                    <button button data-toggle="modal" data-target="#myModal2"  class="btn btn-rose btn-round btn-fab btn-fab-mini">
                                        <i class="material-icons">edit</i>
                                    </button></p>
                            </div>
                        </div>
                    </div>


                    <div class="col-md-4">
                        <div class="card card-chart">
                            <!--                            <div class="card-header" data-background-color="white">-->
                            <div class="card-header" data-background-color="white">
                                <!--                                <div id="chart3" class="ct-chart"></div>-->
                                <!--                                <canvas id="bar-chart"  height="100"></canvas>-->
                                <!--                                <div id="chart_div" ></div>-->
                                <!--                                <canvas id="chartJSContainer" width="300" height="100"></canvas>-->
                                <div id="chart_div" style="height: 160px;" ></div>
                            </div>
                            <div class="card-content">
                                <h4 class="card-title">Tổng doanh thu</h4>
                                <p class="category">Năm {{year}}
                                    <button button data-toggle="modal" data-target="#myModal2"  class="btn btn-warning btn-round btn-fab btn-fab-mini">
                                        <i class="material-icons">edit</i>
                                    </button></p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card card-chart">
                            <div class="card-header" data-background-color="blue">
                                <div id="chart4" class="ct-chart"></div>
                            </div>
                            <div class="card-content">
                                <h4 class="card-title">Tổng khách hàng</h4>
                                <p class="category">Năm {{year}}
                                    <button button data-toggle="modal" data-target="#myModal2"  class="btn btn-info btn-round btn-fab btn-fab-mini">
                                        <i class="material-icons">edit</i>
                                    </button></p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="card">
                            <div class="card-header card-header-icon" data-background-color="green">
                                <i class="material-icons"></i>
                            </div>
                            <div class="card-content">
                                <h4 class="card-title">Top 10 số lượng sản phẩm bán ra nhiều nhất {{year_top}} <button data-toggle="modal" data-target="#myModal3" class="btn btn-round">
                                    <i class="material-icons">edit_calendar</i> Tìm kiếm theo năm
                                </button>
                                    <button data-toggle="modal" data-target="#myModal" class="btn btn-round">
                                        <i class="material-icons">edit_calendar</i> Tìm kiếm theo tháng
                                    </button>
                                </h4>
                                <div class="row">
                                    <div class="col-md-5">
                                        <div class="table-responsive table-sales">
                                            <table class="table">
                                                <tbody>
                                                <tr >
                                                    <td>Tên Sản Phẩm</td>
                                                    <td class="text-right">
                                                        Số Lượng Bán
                                                    </td>
                                                    <td class="text-right">
                                                        Tỗng Tiền
                                                    </td>
                                                </tr>
                                                <tr ng-repeat="toppr in topproduct">
                                                    <td>{{toppr[0]}}</td>
                                                    <td class="text-right">
                                                        {{toppr[1]}}
                                                    </td>
                                                    <td class="text-right">
                                                        {{toppr[2]}}
                                                    </td>
                                                </tr>

                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="col-md-7">
                                        <!--                                        <div id="chart1" class="ct-chart"></div>-->
                                        <!--                                        <canvas id="pie-chart" width="500" height="170"></canvas>-->
                                        <div id="donutchart" style="width: 900px; height: 500px;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="card">
                            <div class="card-header card-header-icon" data-background-color="green">
                                <i class="material-icons"></i>
                            </div>
                            <div class="card-content">
                                <h4 class="card-title">Top 10 mặt hàng được yêu thích nhất {{year_top}} <button data-toggle="modal" data-target="#myModal3" class="btn btn-round">
                                    <i class="material-icons">edit_calendar</i> Tìm kiếm theo năm
                                </button>
                                    <button data-toggle="modal" data-target="#myModal" class="btn btn-round">
                                        <i class="material-icons">edit_calendar</i> Tìm kiếm theo tháng
                                    </button>
                                </h4>
                                <div class="row">
                                    <div class="col-md-5">
                                        <div class="table-responsive table-sales">
                                            <table class="table">
                                                <tbody>
                                                <tr>
                                                    <td>Tên Sản Phẩm</td>
                                                    <!--                                                    <td class="text-right">-->
                                                    <!--                                                        2.920-->
                                                    <!--                                                    </td>-->
                                                    <td class="text-right">
                                                        Số lượt thích
                                                    </td>
                                                </tr>
                                                <tr ng-repeat="wi in topwishlish">
                                                    <td>{{wi[0]}}</td>
                                                    <!--                                                    <td class="text-right">-->
                                                    <!--                                                        2.920-->
                                                    <!--                                                    </td>-->
                                                    <td class="text-right">
                                                        {{wi[1]}}
                                                    </td>
                                                </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="col-md-7">
                                        <!--                                        <div id="chart5" class="ct-chart"></div>-->
                                        <div id="piechart" style="width: 900px; height: 500px;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="card">
                            <div class="card-header card-header-icon" data-background-color="green">
                                <i class="material-icons"></i>
                            </div>
                            <div class="card-content">
                                <h4 class="card-title">Top 10 khách hàng {{year_top}} <button data-toggle="modal" data-target="#myModal3" class="btn btn-round">
                                    <i class="material-icons">edit_calendar</i> Tìm kiếm theo năm
                                </button>
                                    <button data-toggle="modal" data-target="#myModal" class="btn btn-round">
                                        <i class="material-icons">edit_calendar</i> Tìm kiếm theo tháng
                                    </button>
                                </h4>
                                <div class="row">
                                    <div class="col-md-5">
                                        <div class="table-responsive table-sales">
                                            <table class="table">
                                                <tbody>
                                                <tr>
                                                    <td>Tên Khách Hàng</td>
                                                    <td class="text-right">
                                                        Tổng Tiền
                                                    </td>
                                                </tr>
                                                <tr ng-repeat="us in topuser">
                                                    <td>{{us[0]}}</td>
                                                    <td class="text-right">
                                                        {{us[1]}}
                                                    </td>
                                                </tr>

                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="col-md-7">
                                        <!--                                        <div id="chart6" class="ct-chart"></div>-->
                                        <div id="barChart" style="width: 900px; height: 600px;"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!--                <div class="row">-->
                <!--                    <div class="col-md-12">-->
                <!--                        <div class="card">-->
                <!--                            <div class="card-header card-header-icon" data-background-color="purple">-->
                <!--                                <i class="material-icons">assignment</i>-->
                <!--                            </div>-->
                <!--                            <div class="card-content">-->
                <!--                                <h4 class="card-title">Thống kê doanh thu từng mặt hàng <button data-toggle="modal" data-target="#myModal" class="btn btn-round">-->
                <!--                                    <i class="material-icons">edit_calendar</i> Click để chọn-->
                <!--                                </button></h4>-->
                <!--                                <div class="toolbar">-->


                <!--                                </div>-->
                <!--                                <div class="material-datatables">-->
                <!--                                    <table  class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">-->
                <!--                                        <thead>-->
                <!--                                        <tr>-->
                <!--                                            <th>ID</th>-->
                <!--                                            <th>Tên mặt hàng</th>-->
                <!--                                            <th>Số lượng bán</th>-->
                <!--                                            <th>Doanh thu</th>-->

                <!--                                        </tr>-->
                <!--                                        </thead>-->
                <!--                                        <tfoot>-->
                <!--                                        <tr>-->
                <!--                                            <th>ID</th>-->
                <!--                                            <th>Tên mặt hàng</th>-->
                <!--                                            <th>Số lượng bán</th>-->
                <!--                                            <th>Doanh thu</th>-->

                <!--                                        </tr>-->
                <!--                                        </tfoot>-->
                <!--                                        <tbody>-->
                <!--                                        <tr>-->
                <!--                                            <td>0</td>-->
                <!--                                            <td>JL</td>-->
                <!--                                            <td>0</td>-->
                <!--                                            <td>JL</td>-->


                <!--                                        </tr>-->
                <!--                                        </tbody>-->
                <!--                                    </table>-->
                <!--                                </div>-->

                <!--                            </div>-->
                <!--                            &lt;!&ndash; end content&ndash;&gt;-->
                <!--                        </div>-->
                <!--                        &lt;!&ndash;  end card  &ndash;&gt;-->
                <!--                    </div>-->
                <!--                </div>-->
                <!--                <div class="row">-->
                <!--                    <div class="col-md-12">-->
                <!--                        <div class="card">-->
                <!--                            <div class="card-header card-header-icon" data-background-color="purple">-->
                <!--                                <i class="material-icons">assignment</i>-->
                <!--                            </div>-->
                <!--                            <div class="card-content">-->
                <!--                                <h4 class="card-title">Thống kê doanh thu từng nhãn hiệu <button data-toggle="modal" data-target="#myModal" class="btn btn-round">-->
                <!--                                    <i class="material-icons">edit_calendar</i> Click để chọn-->
                <!--                                </button></h4>-->
                <!--                                <div class="toolbar">-->


                <!--                                </div>-->
                <!--                                <div class="material-datatables">-->
                <!--                                    <table class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">-->
                <!--                                        <thead>-->
                <!--                                        <tr>-->
                <!--                                            <th>ID</th>-->
                <!--                                            <th>Tên nhãn hiệu</th>-->
                <!--                                            <th>Số lượng bán</th>-->
                <!--                                            <th>Doanh thu</th>-->

                <!--                                        </tr>-->
                <!--                                        </thead>-->
                <!--                                        <tfoot>-->
                <!--                                        <tr>-->
                <!--                                            <th>ID</th>-->
                <!--                                            <th>Tên nhãn hiệu</th>-->
                <!--                                            <th>Số lượng bán</th>-->
                <!--                                            <th>Doanh thu</th>-->

                <!--                                        </tr>-->
                <!--                                        </tfoot>-->
                <!--                                        <tbody>-->
                <!--                                        <tr>-->
                <!--                                            <td>0</td>-->
                <!--                                            <td>JL</td>-->
                <!--                                            <td>0</td>-->
                <!--                                            <td>JL</td>-->


                <!--                                        </tr>-->
                <!--                                        </tbody>-->
                <!--                                    </table>-->
                <!--                                </div>-->

                <!--                            </div>-->
                <!--                            &lt;!&ndash; end content&ndash;&gt;-->
                <!--                        </div>-->
                <!--                        &lt;!&ndash;  end card  &ndash;&gt;-->
                <!--                    </div>-->
                <!--                </div>-->
                <!--                <div class="row">-->
                <!--                    <div class="col-md-6">-->
                <!--                        <div class="card">-->
                <!--                            <div class="card-header card-header-icon" data-background-color="blue">-->
                <!--                                <i class="material-icons">timeline</i>-->
                <!--                            </div>-->
                <!--                            <div class="card-content">-->
                <!--                                <h4 class="card-title">Biểu đồ thống kê doanh thu 10 mặt hàng-->
                <!--                                    <small> - Rounded</small>-->
                <!--                                </h4>-->
                <!--                            </div>-->
                <!--                            <div id="chart7" class="ct-chart"></svg></div>-->
                <!--                        </div>-->
                <!--                    </div>-->
                <!--                    <div class="col-md-6">-->
                <!--                        <div class="card">-->
                <!--                            <div class="card-header card-header-icon" data-background-color="rose">-->
                <!--                                <i class="material-icons">insert_chart</i>-->
                <!--                            </div>-->
                <!--                            <div class="card-content">-->
                <!--                                <h4 class="card-title">Biểu đồ thống kê doanh thu 10 nhãn hiệu-->
                <!--                                    <small>- Bar Chart</small>-->
                <!--                                </h4>-->
                <!--                            </div>-->
                <!--                            <div id="chart8" class="ct-chart"></div>-->
                <!--                        </div>-->
                <!--                    </div>-->
                <!--                </div>-->
            </div>

        </div>
    </div>

    <div id="myModal" class="modal fade" role="dialog">
        <div class="container d-flex justify-content-center">
            <div class="card">
                <div class="card-content">
                    <form th:action="@{./selecttop}" method="post">
                        <div class="card-header card-header-icon" data-background-color="rose">
                            <i class="material-icons">library_books</i>
                        </div>
                        <div class="card-content">
                            <h4 class="card-title">Datetime Picker</h4>
                            <div class="form-group label-floating is-empty">
                                <label class="label-control">Click để chọn</label>
                                <input type="text" class="form-control datepicker" name="yeartop" data-date-format='MM-YYYY' value="{{month_show}}">
                                <input hidden name="year" value="{{year}}">
                                <span class="material-input"></span>
                            </div>
                            <div class="form-group label-floating is-empty">
                                <!--                                <label>-->
                                <!--                                    <input type="checkbox" name="optionsCheckboxes" ng-click="searchYear()" checked="{{checkYear}}"><span class="checkbox-material"><span class="check"></span></span> Thống kê theo Năm-->
                                <!--                                    <input type="checkbox" name="optionsCheckboxes" ng-click="searchMonth()" checked="{{checkmonth}}"><span class="checkbox-material"><span class="check"></span></span> Thống kê theo Tháng-->
                                <!--                                </label>-->
                            </div>
                        </div>

                        <div class="form-footer text-right">
                            <button class="btn btn-success" type="submit">Ok</button>
                            <button class="btn" data-dismiss="modal" type="button">Cancel</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>


    <div id="myModal2" class="modal fade" role="dialog">
        <div class="container d-flex justify-content-center">
            <div class="card">
                <div class="card-content">
                    <form th:action="@{./home}" method="post">
                        <div class="card-header card-header-icon" data-background-color="rose">
                            <i class="material-icons">library_books</i>
                        </div>
                        <div class="card-content">
                            <h4 class="card-title">Datetime Picker</h4>
                            <div class="form-group label-floating is-empty">
                                <label class="label-control">Click để chọn</label>
                                <input type="text"  name="year_Total" class="form-control datepicker"  data-date-format='YYYY' value="{{year_show}}">
                                <input hidden type="text" name="yeartop" value="{{year_top}}">
                                <span class="material-input"></span>
                            </div>
                        </div>
                        <div class="form-footer text-right">
                            <button class="btn btn-success" type="submit">Ok</button>
                            <button class="btn" type="button" data-dismiss="modal">Cancel</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div id="myModal3" class="modal fade" role="dialog">
        <div class="container d-flex justify-content-center">
            <div class="card">
                <div class="card-content">
                    <form th:action="@{./selecttop}" method="post">
                        <div class="card-header card-header-icon" data-background-color="rose">
                            <i class="material-icons">library_books</i>
                        </div>
                        <div class="card-content">
                            <h4 class="card-title">Datetime Picker</h4>
                            <div class="form-group label-floating is-empty">
                                <label class="label-control">Click để chọn</label>
                                <input type="text"  name="yeartop" class="form-control datepicker"  data-date-format='YYYY' value="{{year_show}}">
                                <input hidden name="year" value="{{year}}">
                                <span class="material-input"></span>
                            </div>
                        </div>
                        <div class="form-footer text-right">
                            <button class="btn btn-success" type="submit">Ok</button>
                            <button class="btn" type="button" data-dismiss="modal">Cancel</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <footer class="footer">
        <div class="container-fluid">
            <nav class="pull-left">
                <ul>
                    <li>
                        <a href="#">
                            Home
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            Company
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            Portofolio
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            Blog
                        </a>
                    </li>
                </ul>
            </nav>
            <p class="copyright pull-right">
                &copy;
                <script>
                    document.write(new Date().getFullYear())
                </script>
                <a href=""> DW Fashion </a>
            </p>
        </div>
    </footer>
</div>

<script type="text/javascript">
    $(document).ready(function() {
        $('#datatables').DataTable({
            "pagingType": "full_numbers",
            "lengthMenu": [
                [10, 25, 50, -1],
                [10, 25, 50, "All"]
            ],
            responsive: true,
            language: {
                search: "_INPUT_",
                searchPlaceholder: "Search records",
            }

        });
        var table = $('#datatables').DataTable();
    });
</script>











<script>
    new Chartist.Bar('#chart7', {
            labels: ['SP1', 'SP1', 'SP1', 'SP1', 'SP1', 'SP1','SP1', 'SP1', 'SP1','SP1'],
            series: [
                [500, 4, 3, 7, 5, 5, 4, 3, 7, 5, ]

            ]
        },{height: 500}
    );
</script>

<script>
    new Chartist.Bar('#chart8', {
            labels: ['SP1', 'SP1', 'SP1', 'SP1', 'SP1', 'SP1','SP1', 'SP1', 'SP1','SP1'],
            series: [
                [500, 4, 3, 7, 5, 5, 4, 3, 7, 5, ]

            ]
        },{height: 500}
    );

</script>
<script>
    var app = angular.module("myapp", []);
    app.controller("myctrl", function($scope, $http) {

        $scope.year_show = new Date().getFullYear();
        $scope.month_show = (new Date().getMonth()+1)+"-"+new Date().getFullYear();

        //tông đơn hàng và doanh thu
        $scope.totalbill = [];
        $http.get("../statistical/totalbill").then(function(response) {
            $scope.totalbill = response.data;
            $scope.totalbill1 =  $scope.totalbill[0];
        });
        $scope.count_User = [];
        $http.get("../statistical/countuser").then(function(response) {
            $scope.count_User = response.data;
            // $scope.User =  $scope.count_User[0];
        });

        $scope.User_newYear = [];
        $http.get("../statistical/countusernewyear").then(function(response) {
            $scope.User_newYear = response.data;
            // $scope.User =  $scope.count_User[0];
        });

        $scope.QuantityInvoiceYear = [];
        $scope.yearHD = [];
        $scope.QuantityYear = []

        // thống kê tổng đơn hàng
        if($scope.year != null) {
            $http.get("../statistical/quantityinvoicebyyear/"+$scope.year).then(function(response) {
                $scope.QuantityInvoiceYear = response.data;
                for(var i = 0; i < $scope.QuantityInvoiceYear.length; i++){
                    if($scope.yearHD.length < $scope.QuantityInvoiceYear.length) {
                        $scope.totalIndex =  $scope.QuantityInvoiceYear[i];
                        $scope.yearHD.push(angular.copy($scope.totalIndex[0]));
                        $scope.QuantityYear.push(angular.copy($scope.totalIndex[1]));
                    }
                }
                var data = {
                    labels: $scope.yearHD,
                    series: [
                        $scope.QuantityYear
                    ]
                };
                var options = {
                    seriesBarDistance: 10
                };
                new Chartist.Bar('#chart2', data, options,);
            });

        }
        //thống kê tổng doanh thu
        $scope.TotalInvoiceYear = [];
        $scope.yearDT = [];
        $scope.TotalYear = []
        $scope.toptalinvoice_chart= [];
        $scope.toptalinvoice_chart.push( ['Month', 'TT']);
        if($scope.year != null) {

            $http.get("../statistical/totalinvoicebyyear/"+$scope.year).then(function(response) {
                $scope.TotalInvoiceYear = response.data;
                for(var i = 0; i < $scope.TotalInvoiceYear.length; i++){
                    if($scope.toptalinvoice_chart.length <= $scope.TotalInvoiceYear.length) {
                        $scope.toptalinvoice_chart.push(angular.copy( $scope.TotalInvoiceYear[i]));
                        // $scope.totalIndex =  $scope.TotalInvoiceYear[i];
                        // $scope.yearDT.push(angular.copy($scope.totalIndex[0]));
                        // $scope.TotalYear.push(angular.copy($scope.totalIndex[1]));
                    }
                }
                // new Chartist.Line('#chart3', {
                //     labels: $scope.yearDT,
                //     series: [
                //         $scope.TotalYear,
                //     ]
                // }, {
                //     fullWidth: true,
                //     chartPadding: {
                //         right: 40
                //     }
                // });
                // alert($scope.toptalinvoice_chart)
                google.charts.load('current', {'packages':['corechart']});
                google.charts.setOnLoadCallback(drawChart);
                function drawChart() {
                    var data = google.visualization.arrayToDataTable(

                        $scope.toptalinvoice_chart
                    );

                    var options = {
                        title: 'Doanh Thu',
                        hAxis: {title: 'Month',  titleTextStyle: {color: '#333'}},
                        vAxis: {minValue: 0}
                    };

                    var chart = new google.visualization.AreaChart(document.getElementById('chart_div'));
                    chart.draw(data, options);
                }
                // new Chart(document.getElementById("bar-chart"), {
                //     type: 'bar',
                //     data: {
                //         labels: $scope.yearDT,
                //         datasets: [
                //             {
                //                 label: "Tổng doanh thu",
                //                 backgroundColor: ["#3e95cd", "#0000FF","#8e5ea2","#3cba9f","#e8c3b9","#c45850","#FF00CC","#33FF33","#AAAAAA","#00CCFF","#FFFF33","#9900FF"],
                //                 data: $scope.TotalYear,
                //                 width : "1px",
                //                 height: "1px"
                //             }
                //         ]
                //     },
                //     options: {
                //         legend: { display: false },
                //         title: {
                //             display: true,
                //             text: ' '
                //         }
                //     }
                // });

                // google.charts.load('current', {packages: ['corechart', 'line']});
                // google.charts.setOnLoadCallback(drawBackgroundColor);
                //
                // function drawBackgroundColor() {
                //     var data = new google.visualization.DataTable();
                //     data.addColumn('number', 'X');
                //     data.addColumn('number', 'Dogs1');
                //
                //     data.addRows($scope.TotalInvoiceYear);
                //
                //     var options = {
                //         hAxis: {
                //             title: 'Time'
                //         },
                //         vAxis: {
                //             title: 'Popularity'
                //         },
                //         backgroundColor: '#f1f8e9'
                //     };
                //
                //     var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
                //     chart.draw(data, options);
                // }

                // var options = {
                //     type: 'line',
                //     data: {
                //         labels: $scope.yearDT,
                //         datasets: [
                //             {
                //                 label: '# of Votes',
                //                 data: $scope.TotalYear,
                //                 borderWidth: 1
                //             }
                //         ]
                //     },
                //     options: {
                //         scales: {
                //             yAxes: [{
                //                 ticks: {
                //                     reverse: false
                //                 }
                //             }]
                //         }
                //     }
                // }
                // var ctx = document.getElementById('chartJSContainer').getContext('2d');
                // new Chart(ctx, options);

            });

        }
        // tổng khách hàng
        $scope.QuantityUser = [];
        $scope.year_user = [];
        $scope.count = []
        if($scope.year != null) {
            $http.get("../statistical/quantityuseryear/"+$scope.year).then(function(response) {
                $scope.QuantityUser = response.data;
                for(var i = 0; i < $scope.QuantityUser.length; i++){
                    if($scope.year_user.length < $scope.QuantityUser.length) {
                        $scope.quantityIndex =  $scope.QuantityUser[i];
                        $scope.year_user.push(angular.copy($scope.quantityIndex[0]));
                        $scope.count.push(angular.copy($scope.quantityIndex[1]));
                    }
                }
                new Chartist.Line('#chart4', {
                    labels: $scope.year_user,
                    series: [
                        $scope.count,
                    ]
                }, {
                    fullWidth: true,
                    chartPadding: {
                        right: 40
                    }
                });
            });

        }
        // top khách hàng
        $scope.topproduct = [];
        $scope.topwishlish= [];
        $scope.topuser = [];
        // alert($scope.year_top);
        if($scope.year_top != null){
            if($scope.year_top.length == 4){
                $http.get("../statistical/topproductbyyear/"+$scope.year_top).then(function(response) {
                    $scope.topproduct = response.data;
                    $scope.product_name = [];
                    $scope.product_total = [];
                    $scope.topproduct_chart = [];
                    $scope.topproduct_chart.push(['Task', 'Hours per Day']);
                    // $scope.char_pro = [];
                    for(var i = 0; i < $scope.topproduct.length; i++){
                        if($scope.topproduct_chart.length <= $scope.topproduct.length) {

                            $scope.toppro_index =  $scope.topproduct[i];
                            // $scope.product_name = $scope.toppro_index[0];
                            // $scope.product_total = $scope.toppro_index[2];
                            $scope.topproduct_chart.push([$scope.toppro_index[0],$scope.toppro_index[2]]);
                            // $scope.product_name.push(angular.copy($scope.toppro_index[0]));
                            // $scope.product_total.push(angular.copy($scope.toppro_index[2]));
                            // $scope.char_pro_index = [$scope.toppro_index[0],$scope.toppro_index[2]];
                            // $scope.test = $scope.aa;
                            // $scope.char_pro.push(angular.copy($scope.char_pro_index));

                        }

                    }
                    google.charts.load("current", {packages:["corechart"]});
                    google.charts.setOnLoadCallback(drawChart);
                    function drawChart() {
                        var data = google.visualization.arrayToDataTable($scope.topproduct_chart);

                        var options = {
                            title: 'My Daily Activities',
                            pieHole: 0.4,
                        };

                        var chart = new google.visualization.PieChart(document.getElementById('donutchart'));
                        chart.draw(data, options);
                    }

                    // new Chart(document.getElementById("pie-chart"), {
                    //     type: 'pie',
                    //     data: {
                    //         labels:  $scope.product_name,
                    //         datasets: [{
                    //             label: "Population (millions)",
                    //             backgroundColor: ["#3e95cd", "#0000FF","#8e5ea2","#3cba9f","#e8c3b9","#c45850","#FF00CC","#33FF33","#AAAAAA","#00CCFF"],
                    //             data: $scope.product_total
                    //         }]
                    //     },
                    //     options: {
                    //         title: {
                    //             display: true,
                    //             text: 'Top sản phẩm bán ra nhiều nhất '
                    //         }
                    //     }
                    // });




                });

                $http.get("../statistical/topwishlishbyyear/"+$scope.year_top).then(function(response) {
                    $scope.topwishlish = response.data;
                    $scope.char_wishlish = [];
                    $scope.char_wishlish.push(['Task', 'Hours per Day']);
                    for(var i = 0; i < $scope.topwishlish.length; i++){
                        if($scope.char_wishlish.length <=  $scope.topwishlish.length) {
                            $scope.char_wishlish.push(angular.copy( $scope.topwishlish[i]));
                            // $scope.name.push(angular.copy($scope.user_index[0]));
                            // $scope.total_bill.push(angular.copy($scope.user_index[1]));
                        }
                    }

                    google.charts.load('current', {'packages':['corechart']});
                    google.charts.setOnLoadCallback(drawChart);

                    function drawChart() {

                        var data = google.visualization.arrayToDataTable(

                            $scope.char_wishlish
                        );

                        var options = {
                            title: 'Top sản phẩm đươc yêu thích nhất'
                        };

                        var chart = new google.visualization.PieChart(document.getElementById('piechart'));

                        chart.draw(data, options);
                    }

                });
                $http.get("../statistical/topuserbyyear/"+$scope.year_top).then(function(response) {
                    $scope.topuser = response.data;
                    $scope.name = [];
                    $scope.total_bill = [];
                    for(var i = 0; i < $scope.topuser.length; i++){
                        if($scope.name.length < $scope.topuser.length) {
                            $scope.user_index =  $scope.topuser[i];
                            $scope.name.push(angular.copy($scope.user_index[0]));
                            $scope.total_bill.push(angular.copy($scope.user_index[1]));
                        }
                    }
                    // new Chartist.Bar('#chart6', {
                    //     labels: $scope.name,
                    //     series:  $scope.total_bill
                    // }, {
                    //     distributeSeries: true,
                    //     height: 500
                    // });


                    google.charts.load('current', {packages: ['corechart']});
                    google.charts.setOnLoadCallback(drawChart);

                    function drawChart() {
                        // Define the chart to be drawn.
                        var data = new google.visualization.DataTable();
                        data.addColumn('string', 'Element');
                        data.addColumn('number', 'Tổng tiền');
                        data.addRows( $scope.topuser);

                        // Instantiate and draw the chart.
                        var chart = new google.visualization.ColumnChart(document.getElementById('barChart'));
                        chart.draw(data, null);
                    }
                });
            }else{
                if($scope.year_top.length = 7){
                    $http.get("../statistical/topproductbymonthyear/"+$scope.year_top).then(function(response) {
                        $scope.topproduct = response.data;
                        $scope.product_name = [];
                        $scope.product_total = [];
                        $scope.topproduct_chart = [];
                        $scope.topproduct_chart.push(['Task', 'Hours per Day']);
                        // $scope.char_pro = [];
                        for(var i = 0; i < $scope.topproduct.length; i++){
                            if($scope.topproduct_chart.length <= $scope.topproduct.length) {

                                $scope.toppro_index =  $scope.topproduct[i];
                                // $scope.product_name = $scope.toppro_index[0];
                                // $scope.product_total = $scope.toppro_index[2];
                                $scope.topproduct_chart.push([$scope.toppro_index[0],$scope.toppro_index[2]]);
                                // $scope.product_name.push(angular.copy($scope.toppro_index[0]));
                                // $scope.product_total.push(angular.copy($scope.toppro_index[2]));
                                // $scope.char_pro_index = [$scope.toppro_index[0],$scope.toppro_index[2]];
                                // $scope.test = $scope.aa;
                                // $scope.char_pro.push(angular.copy($scope.char_pro_index));

                            }

                        }
                        google.charts.load("current", {packages:["corechart"]});
                        google.charts.setOnLoadCallback(drawChart);
                        function drawChart() {
                            var data = google.visualization.arrayToDataTable($scope.topproduct_chart);

                            var options = {
                                title: 'My Daily Activities',
                                pieHole: 0.4,
                            };

                            var chart = new google.visualization.PieChart(document.getElementById('donutchart'));
                            chart.draw(data, options);
                        }


                    });
                    $http.get("../statistical/topwishlishbymonthyear/"+$scope.year_top).then(function(response) {
                        $scope.topwishlish = response.data;
                        $scope.char_wishlish = [];
                        $scope.char_wishlish.push(['Task', 'Hours per Day']);
                        for(var i = 0; i < $scope.topwishlish.length; i++){
                            if($scope.char_wishlish.length <=  $scope.topwishlish.length) {
                                $scope.char_wishlish.push(angular.copy( $scope.topwishlish[i]));
                                // $scope.name.push(angular.copy($scope.user_index[0]));
                                // $scope.total_bill.push(angular.copy($scope.user_index[1]));
                            }
                        }

                        google.charts.load('current', {'packages':['corechart']});
                        google.charts.setOnLoadCallback(drawChart);

                        function drawChart() {

                            var data = google.visualization.arrayToDataTable(

                                $scope.char_wishlish
                            );

                            var options = {
                                title: 'Top sản phẩm đươc yêu thích nhất'
                            };

                            var chart = new google.visualization.PieChart(document.getElementById('piechart'));

                            chart.draw(data, options);
                        }

                    });
                    $http.get("../statistical/topuserbymonthyear/"+$scope.year_top).then(function(response) {


                        $scope.topuser = response.data;
                        $scope.name = [];
                        $scope.total_bill = [];
                        for(var i = 0; i < $scope.topuser.length; i++){
                            if($scope.name.length < $scope.topuser.length) {
                                $scope.user_index =  $scope.topuser[i];
                                $scope.name.push(angular.copy($scope.user_index[0]));
                                $scope.total_bill.push(angular.copy($scope.user_index[1]));
                            }
                        }
                        // new Chartist.Bar('#chart6', {
                        //     labels: $scope.name,
                        //     series:  $scope.total_bill
                        // }, {
                        //     distributeSeries: true,
                        //     height: 500
                        // });


                        google.charts.load('current', {packages: ['corechart']});
                        google.charts.setOnLoadCallback(drawChart);

                        function drawChart() {
                            // Define the chart to be drawn.
                            var data = new google.visualization.DataTable();
                            data.addColumn('string', 'Element');
                            data.addColumn('number', 'Tổng tiền');
                            data.addRows( $scope.topuser);

                            // Instantiate and draw the chart.
                            var chart = new google.visualization.ColumnChart(document.getElementById('barChart'));
                            chart.draw(data, null);
                        }
                    });
                }
            }
        }







    });
    app.directive('input', ['$parse', function ($parse) {
        return {
            controller: 'myctrl',
            restrict: 'E',
            require: '?ngModel',
            link: function (scope, element, attrs) {
                if(attrs.value) {
                    $parse(attrs.ngModel).assign(scope, attrs.value);
                }
            }
        };
    }]);
</script>
</body>
<!--   Core JS Files   -->
<script th:src="@{/assets/js/jquery-3.2.1.min.js}" type="text/javascript"></script>
<script th:src="@{/assets/js/bootstrap.min.js}" type="text/javascript"></script>
<script th:src="@{/assets/js/material.min.js}" type="text/javascript"></script>
<script th:src="@{/assets/js/perfect-scrollbar.jquery.min.js}" type="text/javascript"></script>
<!-- Include a polyfill for ES6 Promises (optional) for IE11, UC Browser and Android browser support SweetAlert -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/core-js/2.4.1/core.js"></script>
<!-- Library for adding dinamically elements -->
<script th:src="@{/assets/js/arrive.min.js}" type="text/javascript"></script>
<!-- Forms Validations Plugin -->
<script th:src="@{/assets/js/jquery.validate.min.js}"></script>
<!--  Plugin for Date Time Picker and Full Calendar Plugin-->
<script th:src="@{/assets/js/moment.min.js}"></script>
<!--  Charts Plugin, full documentation here: https://gionkunz.github.io/chartist-js/ -->
<script th:src="@{/assets/js/chartist.min.js}"></script>
<!--  Plugin for the Wizard, full documentation here: https://github.com/VinceG/twitter-bootstrap-wizard -->
<script th:src="@{/assets/js/jquery.bootstrap-wizard.js}"></script>
<!--  Notifications Plugin, full documentation here: http://bootstrap-notify.remabledesigns.com/    -->
<script th:src="@{/assets/js/bootstrap-notify.js}"></script>
<!--  Plugin for the DateTimePicker, full documentation here: https://eonasdan.github.io/bootstrap-datetimepicker/ -->
<script th:src="@{/assets/js/bootstrap-datetimepicker2.js}"></script>
<!-- Vector Map plugin, full documentation here: http://jvectormap.com/documentation/ -->
<script th:src="@{/assets/js/jquery-jvectormap.js}"></script>
<!-- Sliders Plugin, full documentation here: https://refreshless.com/nouislider/ -->
<script th:src="@{/assets/js/nouislider.min.js}"></script>
<!--  Google Maps Plugin    -->
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=YOUR_KEY_HERE"></script>
<!--  Plugin for Select, full documentation here: http://silviomoreto.github.io/bootstrap-select -->
<script th:src="@{/assets/js/jquery.select-bootstrap.js}"></script>
<!--  DataTables.net Plugin, full documentation here: https://datatables.net/    -->
<script th:src="@{/assets/js/jquery.datatables.js}"></script>
<!-- Sweet Alert 2 plugin, full documentation here: https://limonte.github.io/sweetalert2/ -->
<script th:src="@{/assets/js/sweetalert2.js}"></script>
<!-- Plugin for Fileupload, full documentation here: http://www.jasny.net/bootstrap/javascript/#fileinput -->
<script th:src="@{/assets/js/jasny-bootstrap.min.js}"></script>
<!--  Full Calendar Plugin, full documentation here: https://github.com/fullcalendar/fullcalendar    -->
<script th:src="@{/assets/js/fullcalendar.min.js}"></script>
<!-- Plugin for Tags, full documentation here: https://github.com/bootstrap-tagsinput/bootstrap-tagsinputs  -->
<script th:src="@{/assets/js/jquery.tagsinput.js}"></script>
<!-- Material Dashboard javascript methods -->
<script th:src="@{/assets/js/material-dashboard.js?v=1.2.1}"></script>
<!-- Material Dashboard DEMO methods, don't include it in your project! -->
<script th:src="@{/assets/js/demo.js}"></script>

<script type="text/javascript">
    $(document).ready(function() {
        demo.initFormExtendedDatetimepickers();
    });
</script>

</html>